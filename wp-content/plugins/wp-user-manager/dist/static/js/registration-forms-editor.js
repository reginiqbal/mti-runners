webpackJsonp([3],{"4wDe":function(t,s,e){"use strict";var a={name:"wp-notice",props:{type:String,alternative:Boolean,dismissible:Boolean},computed:{classes:function(){return["vue-wp-notice","notice-"+this.type,this.alternative?"is-alt":"",this.dismissible?"is-dismissible":""]}},data:function(){return{closed:!1}},methods:{close:function(t){this.closed=!0,this.$emit("on-close",t)}}},i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.closed?t._e():e("div",{class:t.classes},[e("p",[t._t("default")],2),t._v(" "),t.dismissible?e("button",{staticClass:"notice-dismiss",attrs:{type:"button"},on:{click:t.close}},[e("span",{staticClass:"screen-reader-text"},[t._v("Dismiss this notice.")])]):t._e()])},staticRenderFns:[]};var o=e("VU/8")(a,i,!1,function(t){e("D0GN")},null,null);s.a=o.exports},D0GN:function(t,s){},L0yy:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("7+uW"),i={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},staticRenderFns:[]},o=e("VU/8")({name:"App"},i,!1,null,null,null).exports,l=e("/ocq"),n=e("mtWM"),r=e.n(n),d=(e("U+D5"),{name:"registration-forms-list",data:function(){return{labels:wpumRegistrationFormsEditor.labels,pluginURL:wpumRegistrationFormsEditor.pluginURL,loading:!1,forms:""}},created:function(){this.getForms()},methods:{getForms:function(){var t=this;this.loading=!0,r.a.get(wpumRegistrationFormsEditor.ajax,{params:{nonce:wpumRegistrationFormsEditor.getFormsNonce,action:"wpum_get_registration_forms"}}).then(function(s){t.loading=!1,t.forms=s.data.data}).catch(function(s){t.loading=!1,console.log(s)})}}}),c={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wpum-registration-forms-list"},[e("h1",{staticClass:"wp-heading-inline"},[e("img",{attrs:{src:t.pluginURL+"assets/images/logo.svg",alt:"WP User Manager"}}),t._v("\n\t\t"+t._s(t.labels.page_title)+"\n\t")]),t._v(" "),e("br"),e("br"),t._v(" "),e("table",{staticClass:"wp-list-table widefat fixed striped"},[e("thead",[e("tr",[e("th",{staticClass:"column-primary",attrs:{scope:"col"}},[t._v(t._s(t.labels.table_name))]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v(t._s(t.labels.table_fields))]),t._v(" "),e("th",{attrs:{scope:"col","data-balloon":t.labels.table_default_tooltip,"data-balloon-pos":"left"}},[t._v(t._s(t.labels.table_default))]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v(t._s(t.labels.table_role))])])]),t._v(" "),e("tbody",[t.loading?e("tr",{staticClass:"no-items"},[t._m(0)]):t._e(),t._v(" "),t.forms.length<1&&!t.loading?e("tr",{staticClass:"no-items"},[e("td",{staticClass:"colspanchange",attrs:{colspan:"4"}},[e("strong",[t._v(t._s(t.labels.table_not_found))])])]):t._e(),t._v(" "),t._l(t.forms,function(s,a){return t.forms?e("tr",{key:a},[e("td",[e("strong",[t._v(t._s(s.name))]),t._v(" "),e("div",{staticClass:"row-actions"},[e("span",[e("router-link",{attrs:{to:{name:"form",params:{id:a}}}},[t._v(t._s(t.labels.table_customize))])],1)])]),t._v(" "),e("td",[t._v("\n\t\t\t\t\t"+t._s(s.count)+"\n\t\t\t\t")]),t._v(" "),e("td",[!0===s.default?e("span",{staticClass:"dashicons dashicons-yes"}):t._e()]),t._v(" "),e("td",[t._v("\n\t\t\t\t\t"+t._s(s.role)+"\n\t\t\t\t")])]):t._e()})],2)])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("td",{staticClass:"colspanchange",attrs:{colspan:"4"}},[s("div",{staticClass:"spinner is-active"})])}]},m=e("VU/8")(d,c,!1,null,null,null).exports,g=e("mw3O"),u=e.n(g),v=e("DAYN"),p={name:"registration-form-editor",components:{draggable:e.n(v).a},data:function(){return{labels:wpumRegistrationFormsEditor.labels,pluginURL:wpumRegistrationFormsEditor.pluginURL,loading:!1,loadingSettings:!1,formID:"",formName:"...",availableFields:[],selectedFields:[],selectedRole:"",allowedRoles:[],showMessage:!1,showMessageSettings:!1,messageStatus:"success",messageContent:""}},created:function(){this.formID=this.$route.params.id,this.getForm()},methods:{getForm:function(){var t=this;this.loading=!0,r.a.get(wpumRegistrationFormsEditor.ajax,{params:{nonce:wpumRegistrationFormsEditor.getFormNonce,action:"wpum_get_registration_form",form_id:this.formID}}).then(function(s){t.loading=!1,t.formName=s.data.data.name,t.availableFields=s.data.data.available_fields,t.selectedFields=s.data.data.stored_fields,t.selectedRole=s.data.data.selected_role,t.allowedRoles=s.data.data.allowed_roles}).catch(function(s){t.loading=!1,console.log(s)})},resetNotice:function(){var t=this;setTimeout(function(){t.showMessage=!1,t.showMessageSettings=!1},3e3)},saveFields:function(){var t=this;this.loading=!0,r.a.post(wpumRegistrationFormsEditor.ajax,u.a.stringify({nonce:wpumRegistrationFormsEditor.saveFormNonce,action:"wpum_save_registration_form",form_id:this.formID,fields:this.selectedFields}),{params:{action:"wpum_save_registration_form"}}).then(function(s){t.loading=!1,t.showMessage=!0,t.messageStatus="success",t.messageContent=wpumRegistrationFormsEditor.labels.success,t.resetNotice()}).catch(function(s){t.loading=!1,t.showMessage=!0,t.messageStatus="error",t.messageContent=wpumRegistrationFormsEditor.labels.error,t.resetNotice(),console.log(s)})},saveSettings:function(){var t=this;this.loadingSettings=!0,r.a.post(wpumRegistrationFormsEditor.ajax,u.a.stringify({nonce:wpumRegistrationFormsEditor.saveFormSettingsNonce,form_id:this.formID,role:this.selectedRole}),{params:{action:"wpum_save_registration_form_settings"}}).then(function(s){t.loadingSettings=!1,t.showMessageSettings=!0,t.messageStatus="success",t.messageContent=wpumRegistrationFormsEditor.labels.success,t.resetNotice()}).catch(function(s){t.loadingSettings=!1,t.showMessageSettings=!0,t.messageStatus="error",t.messageContent=wpumRegistrationFormsEditor.labels.error,t.resetNotice(),console.log(s)})}}},_={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("h1",{staticClass:"wp-heading-inline"},[e("img",{attrs:{src:t.pluginURL+"assets/images/logo.svg",alt:"WP User Manager"}}),t._v("\n\t\t\t"+t._s(t.formName)+"\n\t\t")]),t._v(" "),e("router-link",{staticClass:"page-title-action wpum-icon-button circular",attrs:{to:"/","data-balloon":t.labels.page_back,"data-balloon-pos":"down"}},[e("span",{staticClass:"dashicons dashicons-arrow-left-alt"})]),t._v(" "),e("br"),e("br"),t._v(" "),e("div",{staticClass:"widget-liquid-left"},[e("div",{attrs:{id:"widgets-left"}},[e("div",{staticClass:"widgets-holder-wrap ui-droppable",attrs:{id:"available-widgets-d"}},[e("div",{staticClass:"sidebar-name"},[e("h2",[t._v(t._s(t.labels.editor_available_title)+" "),t.loading?e("div",{staticClass:"spinner is-active"}):t._e()])]),t._v(" "),e("div",{staticClass:"sidebar-description"},[e("p",{staticClass:"description"},[t._v(t._s(t.labels.editor_available_desc))])]),t._v(" "),e("draggable",{staticClass:"dragArea available-fields-holder",attrs:{options:{group:"formFields",sort:!1,animation:150}},model:{value:t.availableFields,callback:function(s){t.availableFields=s},expression:"availableFields"}},t._l(t.availableFields,function(s){return e("div",{key:s.name,staticClass:"widget ui-draggable"},[e("div",{staticClass:"widget-top"},[e("div",{staticClass:"widget-title ui-draggable-handle"},[e("h3",[t._v(t._s(s.name))])])])])}))],1)])]),t._v(" "),e("div",{staticClass:"widget-liquid-right"},[e("div",{staticClass:"wp-clearfix",attrs:{id:"widgets-right"}},[e("div",{staticClass:"sidebars-column-1"},[e("div",{staticClass:"widgets-holder-wrap"},[t.showMessage?e("wp-notice",{attrs:{type:t.messageStatus,alternative:""}},[t._v(t._s(t.messageContent))]):t._e(),t._v(" "),e("div",{staticClass:"widgets-sortables ui-droppable ui-sortable"},[e("div",{staticClass:"sidebar-name"},[e("h2",[t._v(t._s(t.formName)+"\n\t\t\t\t\t\t\t\t\t"),t.loading?e("div",{staticClass:"spinner is-active"}):t._e()])]),t._v(" "),e("div",{staticClass:"sidebar-description"},[e("p",{staticClass:"description"},[t._v(t._s(t.labels.editor_used_fields))])]),t._v(" "),e("draggable",{staticClass:"droppable-fields",attrs:{options:{group:"formFields",animation:150}},on:{sort:t.saveFields},model:{value:t.selectedFields,callback:function(s){t.selectedFields=s},expression:"selectedFields"}},t._l(t.selectedFields,function(s){return e("div",{key:s.name,staticClass:"widget"},[e("div",{staticClass:"widget-top"},[e("div",{staticClass:"widget-title ui-sortable-handle"},[e("h3",[t._v(t._s(s.name))])])])])}))],1)],1)]),t._v(" "),e("div",{staticClass:"sidebars-column-2"},[e("div",{staticClass:"widgets-holder-wrap"},[t.showMessageSettings?e("wp-notice",{attrs:{type:t.messageStatus,alternative:""}},[t._v(t._s(t.messageContent))]):t._e(),t._v(" "),e("form",{attrs:{action:"post"},on:{submit:function(s){s.preventDefault(),t.saveSettings()}}},[e("div",{staticClass:"widgets-sortables ui-droppable ui-sortable"},[e("div",{staticClass:"sidebar-name"},[e("h2",[t._v(t._s(t.labels.settings))])]),t._v(" "),e("div",{staticClass:"settings-wrapper"},[e("label",{attrs:{for:"role"}},[t._v(t._s(t.labels.role_label))]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedRole,expression:"selectedRole"}],attrs:{name:"role",id:"role",disabled:t.loading||t.loadingSettings},on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedRole=s.target.multiple?e:e[0]}}},t._l(t.allowedRoles,function(s){return e("option",{key:s.value,domProps:{value:s.value}},[t._v(t._s(s.label))])}))])]),t._v(" "),e("div",{attrs:{id:"major-publishing-actions"}},[e("div",{attrs:{id:"publishing-action"}},[t.loadingSettings?e("div",{staticClass:"spinner is-active"}):t._e(),t._v(" "),e("input",{staticClass:"button button-primary button-large",attrs:{type:"submit",disabled:t.loading||t.loadingSettings},domProps:{value:t.labels.save}})]),t._v(" "),e("div",{staticClass:"clear"})])])],1)])])])],1)},staticRenderFns:[]},f=e("VU/8")(p,_,!1,null,null,null).exports;a.a.use(l.a);var b=new l.a({routes:[{path:"/",name:"registration-forms-list",component:m},{name:"form",path:"/form/:id",component:f}]}),h=e("tkJY");a.a.use(h.a),a.a.config.productionTip=!1,new a.a({el:"#wpum-registration-forms-editor",router:b,components:{App:o},template:"<App/>"})},"U+D5":function(t,s){}},["L0yy"]);
//# sourceMappingURL=registration-forms-editor.js.map